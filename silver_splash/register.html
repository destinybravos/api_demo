<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API DEMO</title>
    <script src="http://localhost/js_tutorial_repo/js/jquery.js"></script>
    <link rel="stylesheet" href="http://localhost/js_tutorial_repo/fa/css/all.css">
    <link rel="stylesheet" href="css/style.css">
    </head>
<body>
    <div id="container">
        <div id="headerlogin">
            <div id="gmail" class="icons">
                <a href="#"><i class="fa fa-envelope"></i> silversplashstore@yahoo.com</a>
            </div>
            <div id="facebook" class="icons">
                <a href="#"><i class="fab fa-facebook-square"></i> silversplashstore@facebook.com</a>
            </div>
            <div id="whatsapp" class="icons">
                <a href="#"><i class="fab fa-whatsapp"></i> 08034546578</a>
            </div>
            <div id="twitter" class="icons">
                <a href="#"><i class="fab fa-twitter"></i> silversplashstore@twitter.com</a>
            </div>
        </div>
    </div>
    <nav id="menu">
        <ul id="menu_ul">
            <li>
                <a href="index.html">HOME</a>
            </li>
            <li>
                <a href="login.html">LOGIN</a>
            </li>
            <li>
                <a href="register.html">REGISTER</a>
            </li>
            <li>
                <a href="#">FOLLOW</a>
            </li>
            <li>
                <a href="posts.html">POSTS</a>
            </li>
            <li>
                <a href="#">FOREIGN NEWS</a>
            </li>

        </ul>
    </nav>

    <form action="" method="post" id="reg_form" class="myfrm">
        <div class="gen_divform">
            <strong style=" padding-bottom: 40px; text-align: center;"><h3>REGISTER</h3><br></strong> 
            <div class="div_form"> 
                <strong><label for="fname">First Name:</label></strong> 
                <input type="text" name="fname" id="fname" class="input_box" required> 
            </div>
            <div class="div_form">
                <strong><label for="lname">Lastname:</label></strong>
                <input type="text" name="lname" id="lname" class="input_box" required>
            </div>
            <div class="div_form">
                <strong><label for="email">Email:</label></strong>
                <input type="email" name="email" id="email" class="input_box" required>
            </div>
            <div class="div_form">
                <strong><label for="phone">Phone:</label></strong>
                <input type="tel" name="phone" id="phone" class="input_box" required>
            </div>
            <div class="div_form">
                <strong><label for="pass">Password:</label></strong>
                <input type="password" name="pass" id="pass" class="input_box" required>
            </div>
            <div class="div_form">
                <strong><label for="cpass">Confirm Password:</label></strong>
                <input type="password" name="cpass" id="cpass" class="input_box" required>
            </div>
            <div class="div_form">
                <button type="submit" id="reg_btn" class="btn">
                    <i class="fa fa-user-plus"></i>
                    Register
                </button><br>
                <a href="login.html" style="text-decoration: none; color: rgb(13, 13, 48);">Already has an account click here</a>
            </div>
            <div id="error_div">

            </div>
        </div>

    </form>

    

    <footer id="foot">
        <div id="div_foot">
            hfghdnvb
        </div>
    </footer>

    <script>
        $('#reg_form').on('submit', function (ev) {
            ev.preventDefault();
            
            $fName = $('#fname').val();
            $lName = $('#lname').val();
            $phoneNum = $('#phone').val();
            $email = $('#email').val();
            $passWord = $('#pass').val();
            $cpassWord = $('#cpass').val();

            if ($passWord == $cpassWord) {
                let data = {
                    firstname: $fName,
                    lastname: $lName,
                    email: $email,
                    phone: $phoneNum,
                    password: $passWord,
                }
    
                console.log(data);
                
    
                $.ajax({
                    type: 'post',
                    url: 'http://localhost/api_demo/api/register.php',
                    data: data,
                    dataType: 'json',
                    success: function(response){
                        if(response.status == 'success'){
                            window.location.href = 'http://localhost/api_demo/silver_splash/login.html'
                        }else{
                            $('#error_div').text(response.message)
                        }
                    },
                    error: function(xhr, status, msg){
                        console.log(status, msg);
                    }
                });
                
            } else {
                alert('Password Mismatched');
            }
            
            
        });

    </script>

</body>
</html>